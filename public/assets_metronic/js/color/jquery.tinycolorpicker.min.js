!function(o){"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof exports?module.exports=o(require("jquery")):o(jQuery)}((function(o){var t="tinycolorpicker",n={colors:["#ffffff","#A7194B","#FE2712","#FB9902","#FABC02","#FEFE33","#D0EA2B","#66B032","#0391CE","#0247FE","#3D01A5","#8601AF"],backgroundUrl:null};function e(e,r){this.options=o.extend({},n,r),this._defaults=n,this._name=t;var c,i,a,u=this,s=e.find(".track"),l=e.find(".color"),f=null,d=e.find(".colorInput"),g=e.find(".dropdown"),h=g.find("li").remove(),p=null,m=!1,v=!!document.createElement("canvas").getContext,x="ontouchstart"in document.documentElement;function b(t){if(m){var n=o(t.target).offset(),r=p.getImageData(t.pageX-n.left,t.pageY-n.top,1,1).data;u.setColor("rgb("+r[0]+","+r[1]+","+r[2]+")"),e.trigger("change",[u.colorHex,u.colorRGB])}}return this.colorHex="",this.colorRGB="",this.setColor=function(o){o.indexOf("#")>=0?(u.colorHex=o,u.colorRGB=u.hexToRgb(u.colorHex)):(u.colorRGB=o,u.colorHex=u.rgbToHex(u.colorRGB)),l.find(".colorInner").css("backgroundColor",u.colorHex),d.val(u.colorHex)},this.close=function(){m=!1,s.hide()},this.hexToRgb=function(o){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return"rgb("+parseInt(t[1],16)+","+parseInt(t[2],16)+","+parseInt(t[3],16)+")"},this.rgbToHex=function(o){var t=o.match(/\d+/g);function n(o){var t=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F");return isNaN(o)?"00":t[(o-o%16)/16]+t[o%16]}return"#"+n(t[0])+n(t[1])+n(t[2])},v?(f=o("<canvas></canvas>"),s.append(f),p=f[0].getContext("2d"),c=new Image,i=s.css("background-image").replace(/"/g,"").replace(/url\(|\)$/gi,""),c.crossOrigin="Anonymous",s.css("background-image","none"),o(c).load((function(){f.attr("width",this.width),f.attr("height",this.height),p.drawImage(c,0,0,this.width,this.height)})),c.src=u.options.backgroundUrl||i):o.each(u.options.colors,(function(o,t){var n=h.clone();n.css("backgroundColor",t),n.attr("data-color",t),g.append(n)})),a=x?"touchstart":"mousedown",v?(l.on(a,(function(t){t.preventDefault(),t.stopPropagation(),s.toggle(),o(document).on("mousedown.colorpicker",(function(t){o(document).off(".colorpicker"),u.close()}))})),x?(f.on("touchstart",(function(o){return m=!0,b(o.originalEvent.touches[0]),!1})),f.on("touchmove",(function(o){return b(o.originalEvent.touches[0]),!1})),f.on("touchend",(function(o){return u.close(),!1}))):(f.mousedown((function(t){return m=!0,b(t),o(document).on("mouseup.colorpicker",(function(t){return o(document).off(".colorpicker"),u.close(),!1})),!1})),f.mousemove(b))):(l.on("mousedown",(function(o){o.preventDefault(),o.stopPropagation(),g.toggle()})),g.delegate("li","mousedown",(function(t){t.preventDefault(),t.stopImmediatePropagation();var n=o(this).attr("data-color");u.setColor(n),g.hide()}))),u}o.fn[t]=function(n){return this.each((function(){o.data(this,"plugin_"+t)||o.data(this,"plugin_"+t,new e(o(this),n))}))}}));
